<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Capuccino Sites</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1 id="logo">☕ Capuccino Sites</h1>
  </header>

  <!-- LOGIN -->
  <section id="page-login">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Usuário">
    <input type="password" id="password" placeholder="Senha">
    <div class="btn-row">
      <button onclick="login()">Entrar</button>
      <button onclick="register()">Criar Conta</button>
    </div>
  </section>

  <!-- MENU -->
  <section id="page-menu" class="hidden">
    <h2>Menu</h2>
    <div class="btn-col">
      <button onclick="showPage('page-sites')">🌐 Sites</button>
      <button onclick="showPage('page-criar-site')">➕ Criar Site</button>
      <button onclick="showPage('page-editar-site')">✏️ Editar Site</button>
      <button onclick="showPage('page-pessoas')">👤 Pessoas</button>
      <button onclick="showPage('page-chat')">💬 Chat Global</button>
      <button onclick="showPage('page-perfil')">⚙️ Perfil</button>
      <button onclick="logout()">🚪 Sair</button>
    </div>
  </section>

  <!-- SITES -->
  <section id="page-sites" class="hidden">
    <h2>Sites</h2>
    <input type="text" id="search-sites" placeholder="Buscar site..." oninput="loadSites()">
    <ul id="sites-list"></ul>
  </section>

  <!-- CRIAR SITE -->
  <section id="page-criar-site" class="hidden">
    <h2>Criar Site</h2>
    <input type="text" id="novo-site-nome" placeholder="Nome do site">
    <div id="md-help">
      Sintaxe Markdown: **negrito**, *itálico*, # Título
    </div>
    <textarea id="novo-site-conteudo" placeholder="Conteúdo do site (Markdown)"></textarea>
    <button onclick="createSite()">Criar Site</button>
  </section>

  <!-- EDITAR SITE -->
  <section id="page-editar-site" class="hidden">
    <h2>Editar Site</h2>
    <input type="text" id="search-meus-sites" placeholder="Buscar meus sites..." oninput="loadMeusSites()">
    <ul id="meus-sites-list"></ul>
  </section>

  <!-- ABRIR SITE -->
  <section id="page-abrir-site" class="hidden">
    <h2 id="abrir-site-titulo"></h2>
    <div><b>Criado por:</b> <span id="abrir-site-autor"></span></div>
    <div><b>Data:</b> <span id="abrir-site-data"></span></div>
    <div id="abrir-site-conteudo"></div>
    <div><b>Visualizações:</b> <span id="abrir-site-views"></span></div>
    <div><b>Seguidores:</b> <span id="abrir-site-seguidores"></span></div>
    <button id="seguir-btn"></button>
  </section>

  <!-- PESSOAS -->
  <section id="page-pessoas" class="hidden">
    <h2>Pessoas</h2>
    <ul id="pessoas-list"></ul>
  </section>

  <!-- CHAT GLOBAL -->
  <section id="page-chat" class="hidden">
    <h2>Chat Global</h2>
    <div id="chat-messages"></div>
    <div class="chat-input">
      <textarea id="chat-text" placeholder="Escreva sua mensagem..."></textarea>
      <button onclick="sendChat()">Enviar</button>
    </div>
  </section>

  <!-- PERFIL -->
  <section id="page-perfil" class="hidden">
    <h2>Meu Perfil</h2>
    <div>
      <h3>Quem me segue</h3>
      <ul id="meus-seguidores"></ul>
    </div>
    <div>
      <h3>Meus sites</h3>
      <ul id="meus-sites-perfil"></ul>
    </div>
    <div>
      <h3>Editar dados</h3>
      <input type="text" id="novo-nome" placeholder="Novo nome">
      <input type="password" id="nova-senha" placeholder="Nova senha">
      <button onclick="updatePerfil()">Atualizar Perfil</button>
    </div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
</body>
</html>
